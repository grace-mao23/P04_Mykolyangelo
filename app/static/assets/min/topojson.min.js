!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).topojson={})}(this,function(e){"use strict";function m(e){return e}function r(e,t){var r,n,u,a,o=t.id,i=t.bbox,s=null==t.properties?{}:t.properties,c=(n=t,u=function(e){if(null==e)return m;var u,a,i=e.scale[0],s=e.scale[1],c=e.translate[0],l=e.translate[1];return function(e,t){t||(u=a=0);var r=2,n=e.length,o=new Array(n);for(o[0]=(u+=e[0])*i+c,o[1]=(a+=e[1])*s+l;r<n;)o[r]=e[r],++r;return o}}((r=e).transform),a=r.arcs,function e(t){var r,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(e)};case"Point":r=p(t.coordinates);break;case"MultiPoint":r=t.coordinates.map(p);break;case"LineString":r=f(t.arcs);break;case"MultiLineString":r=t.arcs.map(f);break;case"Polygon":r=g(t.arcs);break;case"MultiPolygon":r=t.arcs.map(g);break;default:return null}return{type:n,coordinates:r}}(n));function l(e,t){t.length&&t.pop();for(var r=a[e<0?~e:e],n=0,o=r.length;n<o;++n)t.push(u(r[n],n));e<0&&function(e,t){for(var r,n=e.length,o=n-t;o<--n;)r=e[o],e[o++]=e[n],e[n]=r}(t,o)}function p(e){return u(e)}function f(e){for(var t=[],r=0,n=e.length;r<n;++r)l(e[r],t);return t.length<2&&t.push(t[0]),t}function y(e){for(var t=f(e);t.length<4;)t.push(t[0]);return t}function g(e){return e.map(y)}return null==o&&null==i?{type:"Feature",properties:s,geometry:c}:null==i?{type:"Feature",id:o,properties:s,geometry:c}:{type:"Feature",id:o,bbox:i,properties:s,geometry:c}}e.feature=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return r(t,e)})}:r(t,e)},Object.defineProperty(e,"__esModule",{value:!0})});