!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).d3={})}(this,function(X){"use strict";function r(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function S(o){var e;return 1===o.length&&(e=o,o=function(t,n){return r(e(t),n)}),{left:function(t,n,e,r){for(null==e&&(e=0),null==r&&(r=t.length);e<r;){var i=e+r>>>1;o(t[i],n)<0?e=1+i:r=i}return e},right:function(t,n,e,r){for(null==e&&(e=0),null==r&&(r=t.length);e<r;){var i=e+r>>>1;0<o(t[i],n)?r=i:e=1+i}return e}}}var a=S(r).right;function _(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}var u=Math.sqrt(50),l=Math.sqrt(10),c=Math.sqrt(2);function e(t,n,e){var r,i,o,u,a=-1;if(e=+e,(t=+t)===(n=+n)&&0<e)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(u=s(t,n,e))||!isFinite(u))return[];if(0<u)for(t=Math.ceil(t/u),n=Math.floor(n/u),o=new Array(i=Math.ceil(n-t+1));++a<i;)o[a]=(t+a)*u;else for(t=Math.floor(t*u),n=Math.ceil(n*u),o=new Array(i=Math.ceil(t-n+1));++a<i;)o[a]=(t-a)/u;return r&&o.reverse(),o}function s(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return 0<=i?(u<=o?10:l<=o?5:c<=o?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(u<=o?10:l<=o?5:c<=o?2:1)}function T(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return u<=o?i*=10:l<=o?i*=5:c<=o&&(i*=2),n<t?-i:i}function E(t){for(var n,e,r,i=t.length,o=-1,u=0;++o<i;)u+=t[o].length;for(e=new Array(u);0<=--i;)for(n=(r=t[i]).length;0<=--n;)e[--u]=r[n];return e}var i=Array.prototype.slice;function k(t){return t}var N=1,A=2,C=3,D=4,U=1e-6;function t(t){return"translate("+(t+.5)+",0)"}function o(t){return"translate(0,"+(t+.5)+")"}function F(){return!this.__axis}function n(g,d){var y=[],m=null,_=null,w=6,x=6,M=3,b=g===N||g===D?-1:1,S=g===D||g===A?"x":"y",T=g===N||g===C?t:o;function n(t){var n=null==m?d.ticks?d.ticks.apply(d,y):d.domain():m,e=null==_?d.tickFormat?d.tickFormat.apply(d,y):k:_,r=Math.max(w,0)+M,i=d.range(),o=+i[0]+.5,u=+i[i.length-1]+.5,a=(d.bandwidth?function(n){var e=Math.max(0,n.bandwidth()-1)/2;return n.round()&&(e=Math.round(e)),function(t){return+n(t)+e}}:function(n){return function(t){return+n(t)}})(d.copy()),l=t.selection?t.selection():t,c=l.selectAll(".domain").data([null]),s=(v=l.selectAll(".tick").data(n,d).order()).exit(),f=v.enter().append("g").attr("class","tick"),h=v.select("line"),p=v.select("text"),c=c.merge(c.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),v=v.merge(f),h=h.merge(f.append("line").attr("stroke","currentColor").attr(S+"2",b*w)),p=p.merge(f.append("text").attr("fill","currentColor").attr(S,b*r).attr("dy",g===N?"0em":g===C?"0.71em":"0.32em"));t!==l&&(c=c.transition(t),v=v.transition(t),h=h.transition(t),p=p.transition(t),s=s.transition(t).attr("opacity",U).attr("transform",function(t){return isFinite(t=a(t))?T(t):this.getAttribute("transform")}),f.attr("opacity",U).attr("transform",function(t){var n=this.parentNode.__axis;return T(n&&isFinite(n=n(t))?n:a(t))})),s.remove(),c.attr("d",g===D||g==A?x?"M"+b*x+","+o+"H0.5V"+u+"H"+b*x:"M0.5,"+o+"V"+u:x?"M"+o+","+b*x+"V0.5H"+u+"V"+b*x:"M"+o+",0.5H"+u),v.attr("opacity",1).attr("transform",function(t){return T(a(t))}),h.attr(S+"2",b*w),p.attr(S,b*r).text(e),l.filter(F).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",g===A?"start":g===D?"end":"middle"),l.each(function(){this.__axis=a})}return n.scale=function(t){return arguments.length?(d=t,n):d},n.ticks=function(){return y=i.call(arguments),n},n.tickArguments=function(t){return arguments.length?(y=null==t?[]:i.call(t),n):y.slice()},n.tickValues=function(t){return arguments.length?(m=null==t?null:i.call(t),n):m&&m.slice()},n.tickFormat=function(t){return arguments.length?(_=t,n):_},n.tickSize=function(t){return arguments.length?(w=x=+t,n):w},n.tickSizeInner=function(t){return arguments.length?(w=+t,n):w},n.tickSizeOuter=function(t){return arguments.length?(x=+t,n):x},n.tickPadding=function(t){return arguments.length?(M=+t,n):M},n}var f={value:function(){}};function x(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new h(r)}function h(t){this._=t}function p(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function v(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=f,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}h.prototype=x.prototype={constructor:h,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),u=-1,a=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++u<a;)if(e=(t=o[u]).type)i[e]=v(i[e],t.name,n);else if(null==n)for(e in i)i[e]=v(i[e],t.name,null);return this}for(;++u<a;)if((e=(t=o[u]).type)&&(e=p(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new h(t)},call:function(t,n){if(0<(e=arguments.length-2))for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var g="http://www.w3.org/1999/xhtml",d={svg:"http://www.w3.org/2000/svg",xhtml:g,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function y(t){var n=t+="",e=n.indexOf(":");return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),d.hasOwnProperty(n)?{space:d[n],local:t}:t}function m(t){var n=y(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===g&&t.documentElement.namespaceURI===g?t.createElement(e):t.createElementNS(n,e)}})(n)}function w(){}function M(t){return null==t?w:function(){return this.querySelector(t)}}function b(){return[]}function P(t){return null==t?b:function(){return this.querySelectorAll(t)}}function Y(t){return function(){return this.matches(t)}}function L(t){return new Array(t.length)}function z(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}z.prototype={constructor:z,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var H="$";function j(t,n,e,r,i,o){for(var u,a=0,l=n.length,c=o.length;a<c;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new z(t,o[a]);for(;a<l;++a)(u=n[a])&&(i[a]=u)}function q(t,n,e,r,i,o,u){for(var a,l,c={},s=n.length,f=o.length,h=new Array(s),p=0;p<s;++p)(a=n[p])&&(h[p]=l=H+u.call(a,a.__data__,p,n),l in c?i[p]=a:c[l]=a);for(p=0;p<f;++p)(a=c[l=H+u.call(t,o[p],p,o)])?((r[p]=a).__data__=o[p],c[l]=null):e[p]=new z(t,o[p]);for(p=0;p<s;++p)(a=n[p])&&c[h[p]]===a&&(i[p]=a)}function O(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function V(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function I(t,n){return t.style.getPropertyValue(n)||V(t).getComputedStyle(t,null).getPropertyValue(n)}function R(t){return t.trim().split(/^|\s+/)}function B(t){return t.classList||new Z(t)}function Z(t){this._node=t,this._names=R(t.getAttribute("class")||"")}function $(t,n){for(var e=B(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function W(t,n){for(var e=B(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function G(){this.textContent=""}function Q(){this.innerHTML=""}function J(){this.nextSibling&&this.parentNode.appendChild(this)}function K(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tt(){return null}function nt(){var t=this.parentNode;t&&t.removeChild(this)}function et(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function rt(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}Z.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);0<=n&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var it={};function ot(e,t,n){return e=ut(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function ut(e,r,i){return function(t){var n=X.event;X.event=t;try{e.call(this,this.__data__,r,i)}finally{X.event=n}}}function at(o){return function(){var t=this.__on;if(t){for(var n,e=0,r=-1,i=t.length;e<i;++e)n=t[e],o.type&&n.type!==o.type||n.name!==o.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function lt(l,c,s){var f=it.hasOwnProperty(l.type)?ot:ut;return function(t,n,e){var r,i=this.__on,o=f(c,n,e);if(i)for(var u=0,a=i.length;u<a;++u)if((r=i[u]).type===l.type&&r.name===l.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=s),void(r.value=c);this.addEventListener(l.type,o,s),r={type:l.type,name:l.name,value:c,listener:o,capture:s},i?i.push(r):this.__on=[r]}}function ct(t,n,e,r){var i=X.event;t.sourceEvent=X.event,X.event=t;try{return n.apply(e,r)}finally{X.event=i}}function st(t,n,e){var r=V(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}X.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(it={mouseenter:"mouseover",mouseleave:"mouseout"}));var ft=[null];function ht(t,n){this._groups=t,this._parents=n}function pt(){return new ht([[document.documentElement]],ft)}function vt(t){return"string"==typeof t?new ht([[document.querySelector(t)]],[document.documentElement]):new ht([[t]],ft)}function gt(){for(var t,n=X.event;t=n.sourceEvent;)n=t;return n}function dt(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function yt(t){var n=gt();return n.changedTouches&&(n=n.changedTouches[0]),dt(t,n)}function mt(t,n,e){arguments.length<3&&(e=n,n=gt().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return dt(t,r);return null}function _t(){X.event.stopImmediatePropagation()}function wt(){X.event.preventDefault(),X.event.stopImmediatePropagation()}function xt(t){var n=t.document.documentElement,e=vt(t).on("dragstart.drag",wt,!0);"onselectstart"in n?e.on("selectstart.drag",wt,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Mt(t,n){var e=t.document.documentElement,r=vt(t).on("dragstart.drag",null);n&&(r.on("click.drag",wt,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function bt(t){return function(){return t}}function St(t,n,e,r,i,o,u,a,l,c){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=u,this.dx=a,this.dy=l,this._=c}function Tt(){return!X.event.ctrlKey&&!X.event.button}function Et(){return this.parentNode}function kt(t){return null==t?{x:X.event.x,y:X.event.y}:t}function Nt(){return navigator.maxTouchPoints||"ontouchstart"in this}function At(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Ct(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Dt(){}ht.prototype=pt.prototype={constructor:ht,select:function(t){"function"!=typeof t&&(t=M(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],l=a.length,c=r[i]=new Array(l),s=0;s<l;++s)(o=a[s])&&(u=t.call(o,o.__data__,s,a))&&("__data__"in o&&(u.__data__=o.__data__),c[s]=u);return new ht(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=P(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],l=a.length,c=0;c<l;++c)(u=a[c])&&(r.push(t.call(u,u.__data__,c,a)),i.push(u));return new ht(r,i)},filter:function(t){"function"!=typeof t&&(t=Y(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,l=r[i]=[],c=0;c<a;++c)(o=u[c])&&t.call(o,o.__data__,c,u)&&l.push(o);return new ht(r,this._parents)},data:function(t,n){if(!t)return v=new Array(this.size()),s=-1,this.each(function(t){v[++s]=t}),v;var e,r=n?q:j,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var u=o.length,a=new Array(u),l=new Array(u),c=new Array(u),s=0;s<u;++s){var f=i[s],h=o[s],p=h.length,v=t.call(f,f&&f.__data__,s,i),g=v.length,d=l[s]=new Array(g),y=a[s]=new Array(g);r(f,h,d,y,c[s]=new Array(p),v,n);for(var m,_,w=0,x=0;w<g;++w)if(m=d[w]){for(x<=w&&(x=w+1);!(_=y[x])&&++x<g;);m._next=_||null}}return(a=new ht(a,i))._enter=l,a._exit=c,a},enter:function(){return new ht(this._enter||this._groups.map(L),this._parents)},exit:function(){return new ht(this._exit||this._groups.map(L),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit(),r="function"==typeof t?t(r):r.append(t+"");return null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var l,c=n[a],s=e[a],f=c.length,h=u[a]=new Array(f),p=0;p<f;++p)(l=c[p]||s[p])&&(h[p]=l);for(;a<r;++a)u[a]=n[a];return new ht(u,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];0<=--o;)(r=i[o])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e=e||O;for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var u,a=n[o],l=a.length,c=i[o]=new Array(l),s=0;s<l;++s)(u=a[s])&&(c[s]=u);c.sort(t)}return new ht(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e=y(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}:function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return 1<arguments.length?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(n,e,r){return function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):I(this.node(),t)},property:function(t,n){return 1<arguments.length?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=R(t+"");if(arguments.length<2){for(var r=B(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?$:W)(this,t)}}:n?function(t){return function(){$(this,t)}}:function(t){return function(){W(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?G:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Q:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(J)},lower:function(){return this.each(K)},append:function(t){var n="function"==typeof t?t:m(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:m(t),r=null==n?tt:"function"==typeof n?n:M(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(nt)},clone:function(t){return this.select(t?rt:et)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return 0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}),u=o.length;if(!(arguments.length<2)){for(a=n?lt:at,null==e&&(e=!1),r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var l,c=0,s=a.length;c<s;++c)for(r=0,l=a[c];r<u;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return st(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return st(this,t,n)}})(t,n))}},St.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Ut="\\s*([+-]?\\d+)\\s*",Ft="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yt=/^#([0-9a-f]{3,8})$/,Lt=new RegExp("^rgb\\("+[Ut,Ut,Ut]+"\\)$"),zt=new RegExp("^rgb\\("+[Pt,Pt,Pt]+"\\)$"),Ht=new RegExp("^rgba\\("+[Ut,Ut,Ut,Ft]+"\\)$"),jt=new RegExp("^rgba\\("+[Pt,Pt,Pt,Ft]+"\\)$"),qt=new RegExp("^hsl\\("+[Ft,Pt,Pt]+"\\)$"),Ot=new RegExp("^hsla\\("+[Ft,Pt,Pt,Ft]+"\\)$"),Vt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Xt(){return this.rgb().formatHex()}function It(){return this.rgb().formatRgb()}function Rt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Yt.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?Bt(n):3===e?new Wt(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?Zt(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?Zt(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Lt.exec(t))?new Wt(n[1],n[2],n[3],1):(n=zt.exec(t))?new Wt(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Ht.exec(t))?Zt(n[1],n[2],n[3],n[4]):(n=jt.exec(t))?Zt(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=qt.exec(t))?Kt(n[1],n[2]/100,n[3]/100,1):(n=Ot.exec(t))?Kt(n[1],n[2]/100,n[3]/100,n[4]):Vt.hasOwnProperty(t)?Bt(Vt[t]):"transparent"===t?new Wt(NaN,NaN,NaN,0):null}function Bt(t){return new Wt(t>>16&255,t>>8&255,255&t,1)}function Zt(t,n,e,r){return r<=0&&(t=n=e=NaN),new Wt(t,n,e,r)}function $t(t,n,e,r){return 1===arguments.length?((i=t)instanceof Dt||(i=Rt(i)),i?new Wt((i=i.rgb()).r,i.g,i.b,i.opacity):new Wt):new Wt(t,n,e,null==r?1:r);var i}function Wt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Gt(){return"#"+Jt(this.r)+Jt(this.g)+Jt(this.b)}function Qt(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Jt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Kt(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||1<=e?t=n=NaN:n<=0&&(t=NaN),new nn(t,n,e,r)}function tn(t){if(t instanceof nn)return new nn(t.h,t.s,t.l,t.opacity);if(t instanceof Dt||(t=Rt(t)),!t)return new nn;if(t instanceof nn)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,l=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=l<.5?o+i:2-o-i,u*=60):a=0<l&&l<1?0:u,new nn(u,a,l,t.opacity)}function nn(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function en(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function rn(t){return function(){return t}}function on(o){return 1==(o=+o)?un:function(t,n){return n-t?(e=t,r=n,i=o,e=Math.pow(e,i),r=Math.pow(r,i)-e,i=1/i,function(t){return Math.pow(e+t*r,i)}):rn(isNaN(t)?n:t);var e,r,i}}function un(t,n){var e,r,i=n-t;return i?(e=t,r=i,function(t){return e+t*r}):rn(isNaN(t)?n:t)}At(Dt,Rt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Xt,formatHex:Xt,formatHsl:function(){return tn(this).formatHsl()},formatRgb:It,toString:It}),At(Wt,$t,Ct(Dt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gt,formatHex:Gt,formatRgb:Qt,toString:Qt})),At(nn,function(t,n,e,r){return 1===arguments.length?tn(t):new nn(t,n,e,null==r?1:r)},Ct(Dt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new nn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new nn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Wt(en(240<=t?t-240:120+t,i,r),en(t,i,r),en(t<120?240+t:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var an=function t(n){var u=on(n);function e(n,t){var e=u((n=$t(n)).r,(t=$t(t)).r),r=u(n.g,t.g),i=u(n.b,t.b),o=un(n.opacity,t.opacity);return function(t){return n.r=e(t),n.g=r(t),n.b=i(t),n.opacity=o(t),n+""}}return e.gamma=t,e}(1);function ln(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var cn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(cn.source,"g");function fn(t,r){var n,e,i,o,u,a=cn.lastIndex=sn.lastIndex=0,l=-1,c=[],s=[];for(t+="",r+="";(n=cn.exec(t))&&(e=sn.exec(r));)(i=e.index)>a&&(i=r.slice(a,i),c[l]?c[l]+=i:c[++l]=i),(n=n[0])===(e=e[0])?c[l]?c[l]+=e:c[++l]=e:(c[++l]=null,s.push({i:l,x:ln(n,e)})),a=sn.lastIndex;return a<r.length&&(i=r.slice(a),c[l]?c[l]+=i:c[++l]=i),c.length<2?s[0]?(u=s[0].x,function(t){return u(t)+""}):(o=r,function(){return o}):(r=s.length,function(t){for(var n,e=0;e<r;++e)c[(n=s[e]).i]=n.x(t);return c.join("")})}function hn(t,n){var e,r,i=typeof n;return null==n||"boolean"==i?rn(n):("number"==i?ln:"string"==i?(e=Rt(n))?(n=e,an):fn:n instanceof Rt?an:n instanceof Date?function(n,e){var r=new Date;return n=+n,e=+e,function(t){return r.setTime(n*(1-t)+e*t),r}}:(r=n,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(n)?function(t,n){for(var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),u=0;u<r;++u)i[u]=hn(t[u],n[u]);for(;u<e;++u)o[u]=n[u];return function(t){for(u=0;u<r;++u)o[u]=i[u](t);return o}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=hn(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}:ln:function(n,e){e=e||[];var r,i=n?Math.min(e.length,n.length):0,o=e.slice();return function(t){for(r=0;r<i;++r)o[r]=n[r]*(1-t)+e[r]*t;return o}}))(t,n)}function pn(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}var vn,gn,dn,yn,mn=180/Math.PI,_n={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wn(t,n,e,r,i,o){var u,a,l;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(l=t*e+n*r)&&(e-=t*l,r-=n*l),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,l/=a),t*r<n*e&&(t=-t,n=-n,l=-l,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*mn,skewX:Math.atan(l)*mn,scaleX:u,scaleY:a}}function xn(E,k,N,A){function C(t){return t.length?t.pop()+" ":""}return function(t,n){var e,r,i,o,u,a,l,c,s,f,h,p,v,g,d,y,m,_,w,x,M,b,S=[],T=[];return t=E(t),n=E(n),e=t.translateX,r=t.translateY,i=n.translateX,o=n.translateY,u=S,a=T,e!==i||r!==o?(l=u.push("translate(",null,k,null,N),a.push({i:l-4,x:ln(e,i)},{i:l-2,x:ln(r,o)})):(i||o)&&u.push("translate("+i+k+o+N),c=t.rotate,s=n.rotate,f=S,h=T,c!==s?(180<c-s?s+=360:180<s-c&&(c+=360),h.push({i:f.push(C(f)+"rotate(",null,A)-2,x:ln(c,s)})):s&&f.push(C(f)+"rotate("+s+A),p=t.skewX,v=n.skewX,g=S,d=T,p!==v?d.push({i:g.push(C(g)+"skewX(",null,A)-2,x:ln(p,v)}):v&&g.push(C(g)+"skewX("+v+A),y=t.scaleX,m=t.scaleY,_=n.scaleX,w=n.scaleY,x=S,M=T,y!==_||m!==w?(b=x.push(C(x)+"scale(",null,",",null,")"),M.push({i:b-4,x:ln(y,_)},{i:b-2,x:ln(m,w)})):1===_&&1===w||x.push(C(x)+"scale("+_+","+w+")"),t=n=null,function(t){for(var n,e=-1,r=T.length;++e<r;)S[(n=T[e]).i]=n.x(t);return S.join("")}}}var Mn,bn,Sn=xn(function(t){return"none"===t?_n:(vn||(vn=document.createElement("DIV"),gn=document.documentElement,dn=document.defaultView),vn.style.transform=t,t=dn.getComputedStyle(gn.appendChild(vn),null).getPropertyValue("transform"),gn.removeChild(vn),wn(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Tn=xn(function(t){return null==t?_n:((yn=yn||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=yn.transform.baseVal.consolidate())?wn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):_n)},", ",")",")"),En=0,kn=0,Nn=0,An=1e3,Cn=0,Dn=0,Un=0,Fn="object"==typeof performance&&performance.now?performance:Date,Pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yn(){return Dn||(Pn(Ln),Dn=Fn.now()+Un)}function Ln(){Dn=0}function zn(){this._call=this._time=this._next=null}function Hn(t,n,e){var r=new zn;return r.restart(t,n,e),r}function jn(){Dn=(Cn=Fn.now())+Un,En=kn=0;try{!function(){Yn(),++En;for(var t,n=Mn;n;)0<=(t=Dn-n._time)&&n._call.call(null,t),n=n._next;--En}()}finally{En=0,function(){var t,n,e=Mn,r=1/0;for(;e;)e=e._call?(r>e._time&&(r=e._time),(t=e)._next):(n=e._next,e._next=null,t?t._next=n:Mn=n);bn=t,On(r)}(),Dn=0}}function qn(){var t=Fn.now(),n=t-Cn;An<n&&(Un-=n,Cn=t)}function On(t){En||(kn=kn&&clearTimeout(kn),24<t-Dn?(t<1/0&&(kn=setTimeout(jn,t-Fn.now()-Un)),Nn=Nn&&clearInterval(Nn)):(Nn||(Cn=Fn.now(),Nn=setInterval(qn,An)),En=1,Pn(jn)))}function Vn(n,e,t){var r=new zn;return e=null==e?0:+e,r.restart(function(t){r.stop(),n(t+e)},e,t),r}zn.prototype=Hn.prototype={constructor:zn,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Yn():+e)+(null==n?0:+n),this._next||bn===this||(bn?bn._next=this:Mn=this,bn=this),this._call=t,this._time=e,On()},stop:function(){this._call&&(this._call=null,this._time=1/0,On())}};var Xn=x("start","end","cancel","interrupt"),In=[],Rn=0,Bn=1,Zn=2,$n=3,Wn=4,Gn=5,Qn=6;function Jn(t,n,e,r,i,o){var u,a,l,c,s,f=t.__transition;if(f){if(e in f)return}else t.__transition={};function h(t){var n,e,r,i;if(l.state!==Bn)return v();for(n in s)if((i=s[n]).name===l.name){if(i.state===$n)return Vn(h);i.state===Wn?(i.state=Qn,i.timer.stop(),i.on.call("interrupt",u,u.__data__,i.index,i.group),delete s[n]):+n<a&&(i.state=Qn,i.timer.stop(),i.on.call("cancel",u,u.__data__,i.index,i.group),delete s[n])}if(Vn(function(){l.state===$n&&(l.state=Wn,l.timer.restart(p,l.delay,l.time),p(t))}),l.state=Zn,l.on.call("start",u,u.__data__,l.index,l.group),l.state===Zn){for(l.state=$n,c=new Array(r=l.tween.length),n=0,e=-1;n<r;++n)(i=l.tween[n].value.call(u,u.__data__,l.index,l.group))&&(c[++e]=i);c.length=e+1}}function p(t){for(var n=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(v),l.state=Gn,1),e=-1,r=c.length;++e<r;)c[e].call(u,n);l.state===Gn&&(l.on.call("end",u,u.__data__,l.index,l.group),v())}function v(){for(var t in l.state=Qn,l.timer.stop(),delete s[a],s)return;delete u.__transition}u=t,a=e,l={name:n,index:r,group:i,on:Xn,tween:In,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Rn},((s=u.__transition)[a]=l).timer=Hn(function(t){l.state=Bn,l.timer.restart(h,l.delay,l.time),l.delay<=t&&h(t-l.delay)},0,l.time)}function Kn(t,n){var e=ne(t,n);if(e.state>Rn)throw new Error("too late; already scheduled");return e}function te(t,n){var e=ne(t,n);if(e.state>$n)throw new Error("too late; already running");return e}function ne(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function ee(t,n){var e,r,i,o=t.__transition,u=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>Zn&&e.state<Gn,e.state=Qn,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):u=!1;u&&delete t.__transition}}function re(t,n,e){var r=t._id;return t.each(function(){var t=te(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return ne(t,r).value[n]}}function ie(t,n){var e;return("number"==typeof n?ln:n instanceof Rt?an:(e=Rt(n))?(n=e,an):fn)(t,n)}function oe(r,i){var o,u;function t(){var n,e,t=i.apply(this,arguments);return t!==u&&(o=(u=t)&&(n=r,e=t,function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))})),o}return t._value=i,t}function ue(r,i){var o,u;function t(){var n,e,t=i.apply(this,arguments);return t!==u&&(o=(u=t)&&(n=r,e=t,function(t){this.setAttribute(n,e.call(this,t))})),o}return t._value=i,t}function ae(e,r,i){var o,u,a=(r+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return 0<=n&&(t=t.slice(0,n)),!t||"start"===t})?Kn:te;return function(){var t=a(this,e),n=t.on;n!==o&&(u=(o=n).copy()).on(r,i),t.on=u}}var le=pt.prototype.constructor;function ce(t){return function(){this.style.removeProperty(t)}}function se(i,o,u){var a,l;function t(){var n,e,r,t=o.apply(this,arguments);return t!==l&&(a=(l=t)&&(n=i,e=t,r=u,function(t){this.style.setProperty(n,e.call(this,t),r)})),a}return t._value=o,t}function fe(e){var r,i;function t(){var n,t=e.apply(this,arguments);return t!==i&&(r=(i=t)&&(n=t,function(t){this.textContent=n.call(this,t)})),r}return t._value=e,t}var he=0;function pe(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function ve(t){return pt().transition(t)}function ge(){return++he}var de=pt.prototype;pe.prototype=ve.prototype={constructor:pe,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=M(t));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var a,l,c=r[u],s=c.length,f=o[u]=new Array(s),h=0;h<s;++h)(a=c[h])&&(l=t.call(a,a.__data__,h,c))&&("__data__"in a&&(l.__data__=a.__data__),f[h]=l,Jn(f[h],n,e,h,f,ne(a,e)));return new pe(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=P(t));for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var l,c=r[a],s=c.length,f=0;f<s;++f)if(l=c[f]){for(var h,p=t.call(l,l.__data__,f,c),v=ne(l,e),g=0,d=p.length;g<d;++g)(h=p[g])&&Jn(h,n,e,g,p,v);o.push(p),u.push(l)}return new pe(o,u,n,e)},filter:function(t){"function"!=typeof t&&(t=Y(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,l=r[i]=[],c=0;c<a;++c)(o=u[c])&&t.call(o,o.__data__,c,u)&&l.push(o);return new pe(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var l,c=n[a],s=e[a],f=c.length,h=u[a]=new Array(f),p=0;p<f;++p)(l=c[p]||s[p])&&(h[p]=l);for(;a<r;++a)u[a]=n[a];return new pe(u,this._parents,this._name,this._id)},selection:function(){return new le(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=ge(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a,l=r[o],c=l.length,s=0;s<c;++s){(u=l[s])&&Jn(u,t,e,s,l,{time:(a=ne(u,n)).time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease})}return new pe(r,this._parents,t,e)},call:de.call,nodes:de.nodes,node:de.node,size:de.size,empty:de.empty,each:de.each,on:function(t,n){var e=this._id;return arguments.length<2?ne(this.node(),e).on.on(t):this.each(ae(e,t,n))},attr:function(t,n){var e=y(t),r="transform"===e?Tn:ie;return this.attrTween(t,"function"==typeof n?(e.local?function(r,i,o){var u,a,l;return function(){var t,n,e=o(this);if(null!=e)return(t=this.getAttributeNS(r.space,r.local))===(n=e+"")?null:t===u&&n===a?l:(a=n,l=i(u=t,e));this.removeAttributeNS(r.space,r.local)}}:function(r,i,o){var u,a,l;return function(){var t,n,e=o(this);if(null!=e)return(t=this.getAttribute(r))===(n=e+"")?null:t===u&&n===a?l:(a=n,l=i(u=t,e));this.removeAttribute(r)}})(e,r,re(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(n,e,r){var i,o,u=r+"";return function(){var t=this.getAttributeNS(n.space,n.local);return t===u?null:t===i?o:o=e(i=t,r)}}:function(n,e,r){var i,o,u=r+"";return function(){var t=this.getAttribute(n);return t===u?null:t===i?o:o=e(i=t,r)}})(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=y(t);return this.tween(e,(r.local?oe:ue)(r,n))},style:function(t,n,e){var r,i,o,u,a,l,c,s,f,h,p,v,g,d,y,m,_,w,x,M,b,S,T,E,k,N="transform"==(t+="")?Sn:ie;return null==n?this.styleTween(t,(b=t,S=N,function(){var t=I(this,b),n=(this.style.removeProperty(b),I(this,b));return t===n?null:t===T&&n===E?k:k=S(T=t,E=n)})).on("end.style."+t,ce(t)):"function"==typeof n?this.styleTween(t,(m=N,_=re(this,"style."+(y=t),n),function(){var t=I(this,y),n=_(this),e=n+"";return null==n&&(this.style.removeProperty(y),e=n=I(this,y)),t===e?null:t===w&&e===x?M:(x=e,M=m(w=t,n))})).each((c=this._id,d="end."+(g="style."+(s=t)),function(){var t=te(this,c),n=t.on,e=null==t.value[g]?v=v||ce(s):void 0;n===f&&p===e||(h=(f=n).copy()).on(d,p=e),t.on=h})):this.styleTween(t,(r=t,i=N,l=(o=n)+"",function(){var t=I(this,r);return t===l?null:t===u?a:a=i(u=t,o)}),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,se(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?(e=re(this,"text",t),function(){var t=e(this);this.textContent=null==t?"":t}):(n=null==t?"":t+"",function(){this.textContent=n}));var n,e},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,fe(t))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=ne(this.node(),e).tween,o=0,u=i.length;o<u;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(i,o){var u,a;return function(){var t=te(this,i),n=t.tween;if(n!==u)for(var e=0,r=(a=u=n).length;e<r;++e)if(a[e].name===o){(a=a.slice()).splice(e,1);break}t.tween=a}}:function(o,u,a){var l,c;if("function"!=typeof a)throw new Error;return function(){var t=te(this,o),n=t.tween;if(n!==l){c=(l=n).slice();for(var e={name:u,value:a},r=0,i=c.length;r<i;++r)if(c[r].name===u){c[r]=e;break}r===i&&c.push(e)}t.tween=c}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Kn(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Kn(this,t).delay=n}})(n,t)):ne(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){te(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){te(this,t).duration=n}})(n,t)):ne(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){te(this,t).ease=n}}(n,t)):ne(this.node(),n).ease},end:function(){var i,o,u=this,a=u._id,l=u.size();return new Promise(function(t,n){var e={value:n},r={value:function(){0==--l&&t()}};u.each(function(){var t=te(this,a),n=t.on;n!==i&&((o=(i=n).copy())._.cancel.push(e),o._.interrupt.push(e),o._.end.push(r)),t.on=o})})}};var ye={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function me(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return ye.time=Yn(),ye;return e}function _e(t){return function(){return t}}function we(t,n,e){this.target=t,this.type=n,this.selection=e}function xe(){X.event.stopImmediatePropagation()}function Me(){X.event.preventDefault(),X.event.stopImmediatePropagation()}pt.prototype.interrupt=function(t){return this.each(function(){ee(this,t)})},pt.prototype.transition=function(t){var n,e;t=t instanceof pe?(n=t._id,t._name):(n=ge(),(e=ye).time=Yn(),null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],l=a.length,c=0;c<l;++c)(u=a[c])&&Jn(u,t,n,c,a,e||me(u,n));return new pe(r,this._parents,t,n)};var be={name:"drag"},Se={name:"space"},Te={name:"handle"},Ee={name:"center"};function ke(t){return[+t[0],+t[1]]}function Ne(t){return[ke(t[0]),ke(t[1])]}var Ae={name:"x",handles:["w","e"].map(Le),input:function(t,n){return null==t?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ce={name:"y",handles:["n","s"].map(Le),input:function(t,n){return null==t?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},De={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ue={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Fe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Pe={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ye={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Le(t){return{type:t}}function ze(){return!X.event.ctrlKey&&!X.event.button}function He(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function je(){return navigator.maxTouchPoints||"ontouchstart"in this}function qe(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}var Oe=Math.PI,Ve=2*Oe,Xe=1e-6,Ie=Ve-Xe;function Re(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Be(){return new Re}Re.prototype=Be.prototype={constructor:Re,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o,u,a,l,c,s,f,h,p,v=this._x1,g=this._y1,d=e-t,y=r-n,m=v-t,_=g-n,w=m*m+_*_;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=n):Xe<w&&(Math.abs(_*d-y*m)>Xe&&i?(a=d*d+y*y,l=(o=e-v)*o+(u=r-g)*u,c=Math.sqrt(a),s=Math.sqrt(w),h=(f=i*Math.tan((Oe-Math.acos((a+w-l)/(2*c*s)))/2))/s,p=f/c,Math.abs(h-1)>Xe&&(this._+="L"+(t+h*m)+","+(n+h*_)),this._+="A"+i+","+i+",0,0,"+ +(m*u<_*o)+","+(this._x1=t+p*d)+","+(this._y1=n+p*y)):this._+="L"+(this._x1=t)+","+(this._y1=n))},arc:function(t,n,e,r,i,o){t=+t,n=+n,o=!!o;var u=(e=+e)*Math.cos(r),a=e*Math.sin(r),l=t+u,c=n+a,s=1^o,f=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Xe||Math.abs(this._y1-c)>Xe)&&(this._+="L"+l+","+c),e&&(f<0&&(f=f%Ve+Ve),Ie<f?this._+="A"+e+","+e+",0,1,"+s+","+(t-u)+","+(n-a)+"A"+e+","+e+",0,1,"+s+","+(this._x1=l)+","+(this._y1=c):Xe<f&&(this._+="A"+e+","+e+",0,"+ +(Oe<=f)+","+s+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};var Ze="$";function $e(){}function We(t,n){var e=new $e;if(t instanceof $e)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var u in t)e.set(u,t[u]);return e}$e.prototype=We.prototype={constructor:$e,has:function(t){return Ze+t in this},get:function(t){return this[Ze+t]},set:function(t,n){return this[Ze+t]=n,this},remove:function(t){var n=Ze+t;return n in this&&delete this[n]},clear:function(){for(var t in this)t[0]===Ze&&delete this[t]},keys:function(){var t=[];for(var n in this)n[0]===Ze&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)n[0]===Ze&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)n[0]===Ze&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)n[0]===Ze&&++t;return t},empty:function(){for(var t in this)if(t[0]===Ze)return!1;return!0},each:function(t){for(var n in this)n[0]===Ze&&t(this[n],n.slice(1),this)}};function Ge(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function Qe(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[1<r.length?r[0]+r.slice(2):r,+t.slice(e+1)]}function Je(t){return(t=Qe(Math.abs(t)))?t[1]:NaN}var Ke,tr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nr(t){if(!(n=tr.exec(t)))throw new Error("invalid format: "+t);var n;return new er({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function er(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function rr(t,n){var e=Qe(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}nr.prototype=er.prototype,er.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ir={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return rr(100*t,n)},r:rr,s:function(t,n){var e=Qe(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Ke=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,u=r.length;return o===u?r:u<o?r+new Array(o-u+1).join("0"):0<o?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Qe(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function or(t){return t}var ur,ar,lr,cr=Array.prototype.map,sr=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function fr(t){var n,a,l,M=void 0===t.grouping||void 0===t.thousands?or:(a=cr.call(t.grouping,Number),l=t.thousands+"",function(t,n){for(var e=t.length,r=[],i=0,o=a[0],u=0;0<e&&0<o&&(n<u+o+1&&(o=Math.max(1,n-u)),r.push(t.substring(e-=o,e+o)),!((u+=o+1)>n));)o=a[i=(i+1)%a.length];return r.reverse().join(l)}),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",b=void 0===t.decimal?".":t.decimal+"",S=void 0===t.numerals?or:(n=cr.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return n[+t]})}),o=void 0===t.percent?"%":t.percent+"",T=void 0===t.minus?"-":t.minus+"",E=void 0===t.nan?"NaN":t.nan+"";function u(t){var c=(t=nr(t)).fill,s=t.align,f=t.sign,n=t.symbol,h=t.zero,p=t.width,v=t.comma,g=t.precision,d=t.trim,y=t.type;"n"===y?(v=!0,y="g"):ir[y]||(void 0===g&&(g=12),d=!0,y="g"),(h||"0"===c&&"="===s)&&(h=!0,c="0",s="=");var m="$"===n?r:"#"===n&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===n?i:/[%p]/.test(y)?o:"",w=ir[y],x=/[defgprs%]/.test(y);function e(t){var n,e,r,i=m,o=_;if("c"===y)o=w(t)+o,t="";else{var u=(t=+t)<0||1/t<0;if(t=isNaN(t)?E:w(Math.abs(t),g),d&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(n+1):t}(t)),u&&0==+t&&"+"!==f&&(u=!1),i=(u?"("===f?f:T:"-"===f||"("===f?"":f)+i,o=("s"===y?sr[8+Ke/3]:"")+o+(u&&"("===f?")":""),x)for(n=-1,e=t.length;++n<e;)if((r=t.charCodeAt(n))<48||57<r){o=(46===r?b+t.slice(n+1):t.slice(n))+o,t=t.slice(0,n);break}}v&&!h&&(t=M(t,1/0));var a=i.length+t.length+o.length,l=a<p?new Array(p-a+1).join(c):"";switch(v&&h&&(t=M(l+t,l.length?p-o.length:1/0),l=""),s){case"<":t=i+t+o+l;break;case"=":t=i+l+t+o;break;case"^":t=l.slice(0,a=l.length>>1)+i+t+o+l.slice(a);break;default:t=l+i+t+o}return S(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),e.toString=function(){return t+""},e}return{format:u,formatPrefix:function(t,n){var e=u(((t=nr(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Je(n)/3))),i=Math.pow(10,-r),o=sr[8+r/3];return function(t){return e(i*t)+o}}}}function hr(){return new pr}function pr(){this.reset()}ur=fr({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),ar=ur.format,lr=ur.formatPrefix,pr.prototype={constructor:pr,reset:function(){this.s=this.t=0},add:function(t){gr(vr,t,this.t),gr(this,vr.s,this.s),this.s?this.t+=vr.t:this.s=vr.t},valueOf:function(){return this.s}};var vr=new pr;function gr(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}var dr=1e-6,yr=Math.PI,mr=yr/2,_r=yr/4,wr=2*yr,xr=180/yr,Mr=yr/180,br=Math.abs,Sr=Math.atan,Tr=Math.atan2,Er=Math.cos,kr=Math.ceil,Nr=Math.sin,Ar=Math.sign||function(t){return 0<t?1:t<0?-1:0},Cr=Math.sqrt;function Dr(t){return 1<t?mr:t<-1?-mr:Math.asin(t)}function Ur(){}function Fr(t,n){t&&Yr.hasOwnProperty(t.type)&&Yr[t.type](t,n)}var Pr={Feature:function(t,n){Fr(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Fr(e[r].geometry,n)}},Yr={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Lr(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Lr(e[r],n,0)},Polygon:function(t,n){zr(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)zr(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Fr(e[r],n)}};function Lr(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function zr(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Lr(t[e],n,1);n.polygonEnd()}function Hr(t,n){t&&Pr.hasOwnProperty(t.type)?Pr[t.type](t,n):Fr(t,n)}function jr(t){return[Tr(t[1],t[0]),Dr(t[2])]}function qr(t){var n=t[0],e=t[1],r=Er(e);return[r*Er(n),r*Nr(n),Nr(e)]}function Or(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Vr(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Xr(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Ir(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Rr(t){var n=Cr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Br(e,r){function t(t,n){return t=e(t,n),r(t[0],t[1])}return e.invert&&r.invert&&(t.invert=function(t,n){return(t=r.invert(t,n))&&e.invert(t[0],t[1])}),t}function Zr(t,n){return[br(t)>yr?t+Math.round(-t/wr)*wr:t,n]}function $r(e){return function(t,n){return[yr<(t+=e)?t-wr:t<-yr?t+wr:t,n]}}function Wr(t){var n=$r(t);return n.invert=$r(-t),n}function Gr(t,n){var a=Er(t),l=Nr(t),c=Er(n),s=Nr(n);function e(t,n){var e=Er(n),r=Er(t)*e,i=Nr(t)*e,o=Nr(n),u=o*a+r*l;return[Tr(i*c-u*s,r*a-o*l),Dr(u*c+i*s)]}return e.invert=function(t,n){var e=Er(n),r=Er(t)*e,i=Nr(t)*e,o=Nr(n),u=o*c-i*s;return[Tr(i*c+o*s,r*a+u*l),Dr(u*a-r*l)]},e}function Qr(t,n){(n=qr(n))[0]-=t,Rr(n);var e,r=1<(e=-n[1])?0:e<-1?yr:Math.acos(e);return((-n[2]<0?-r:r)+wr-dr)%wr}function Jr(){var e,n=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){n.push(e=[])},lineEnd:Ur,rejoin:function(){1<n.length&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function Kr(t,n){return br(t[0]-n[0])<dr&&br(t[1]-n[1])<dr}function ti(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function ni(t,n,e,r,o){var u,i,a=[],l=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],i=t[n];if(Kr(r,i)){for(o.lineStart(),u=0;u<n;++u)o.point((r=t[u])[0],r[1]);o.lineEnd()}else a.push(e=new ti(r,t,null,!0)),l.push(e.o=new ti(r,null,e,!1)),a.push(e=new ti(i,t,null,!1)),l.push(e.o=new ti(i,null,e,!0))}}),a.length){for(l.sort(n),ei(a),ei(l),u=0,i=l.length;u<i;++u)l[u].e=e=!e;for(var c,s,f=a[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(u=0,i=c.length;u<i;++u)o.point((s=c[u])[0],s[1]);else r(h.x,h.n.x,1,o);h=h.n}else{if(p)for(c=h.p.z,u=c.length-1;0<=u;--u)o.point((s=c[u])[0],s[1]);else r(h.x,h.p.x,-1,o);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);o.lineEnd()}}}function ei(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}Zr.invert=Zr;var ri=hr();function ii(t){return br(t[0])<=yr?t[0]:Ar(t[0])*((br(t[0])+yr)%wr-yr)}function oi(d,y,m,_){return function(a){var l,c,s,e=y(a),f=Jr(),h=y(f),p=!1,n={point:r,lineStart:i,lineEnd:o,polygonStart:function(){n.point=v,n.lineStart=u,n.lineEnd=g,c=[],l=[]},polygonEnd:function(){n.point=r,n.lineStart=i,n.lineEnd=o,c=E(c);var t=function(t,n){var e=ii(n),r=n[1],i=Nr(r),o=[Nr(e),-Er(e),0],u=0,a=0;ri.reset(),1===i?r=mr+dr:-1===i&&(r=-mr-dr);for(var l=0,c=t.length;l<c;++l)if(f=(s=t[l]).length)for(var s,f,h=s[f-1],p=ii(h),v=h[1]/2+_r,g=Nr(v),d=Er(v),y=0;y<f;++y,p=M,g=S,d=T,h=x){var m,_,w,x=s[y],M=ii(x),b=x[1]/2+_r,S=Nr(b),T=Er(b),E=M-p,k=0<=E?1:-1,N=k*E,A=yr<N,C=g*S;ri.add(Tr(C*k*Nr(N),d*T+C*Er(N))),u+=A?E+k*wr:E,A^e<=p^e<=M&&(Rr(m=Vr(qr(h),qr(x))),Rr(_=Vr(o,m)),((w=(A^0<=E?-1:1)*Dr(_[2]))<r||r===w&&(m[0]||m[1]))&&(a+=A^0<=E?1:-1))}return(u<-dr||u<dr&&ri<-dr)^1&a}(l,_);c.length?(p||(a.polygonStart(),p=!0),ni(c,ai,t,m,a)):t&&(p||(a.polygonStart(),p=!0),a.lineStart(),m(null,null,1,a),a.lineEnd()),p&&(a.polygonEnd(),p=!1),c=l=null},sphere:function(){a.polygonStart(),a.lineStart(),m(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function r(t,n){d(t,n)&&a.point(t,n)}function t(t,n){e.point(t,n)}function i(){n.point=t,e.lineStart()}function o(){n.point=r,e.lineEnd()}function v(t,n){s.push([t,n]),h.point(t,n)}function u(){h.lineStart(),s=[]}function g(){v(s[0][0],s[0][1]),h.lineEnd();var t,n,e,r,i=h.clean(),o=f.result(),u=o.length;if(s.pop(),l.push(s),s=null,u)if(1&i){if(0<(n=(e=o[0]).length-1)){for(p||(a.polygonStart(),p=!0),a.lineStart(),t=0;t<n;++t)a.point((r=e[t])[0],r[1]);a.lineEnd()}}else 1<u&&2&i&&o.push(o.pop().concat(o.shift())),c.push(o.filter(ui))}return n}}function ui(t){return 1<t.length}function ai(t,n){return((t=t.x)[0]<0?t[1]-mr-dr:mr-t[1])-((n=n.x)[0]<0?n[1]-mr-dr:mr-n[1])}var li=oi(function(){return 1},function(f){var h,p=NaN,v=NaN,g=NaN;return{lineStart:function(){f.lineStart(),h=1},point:function(t,n){var e,r,i,o,u,a,l,c=0<t?yr:-yr,s=br(t-p);br(s-yr)<dr?(f.point(p,v=0<(v+n)/2?mr:-mr),f.point(g,v),f.lineEnd(),f.lineStart(),f.point(c,v),f.point(t,v),h=0):g!==c&&yr<=s&&(br(p-g)<dr&&(p-=g*dr),br(t-c)<dr&&(t-=c*dr),r=v,o=n,l=Nr((e=p)-(i=t)),v=br(l)>dr?Sr((Nr(r)*(a=Er(o))*Nr(i)-Nr(o)*(u=Er(r))*Nr(e))/(u*a*l)):(r+o)/2,f.point(g,v),f.lineEnd(),f.lineStart(),f.point(c,v),h=0),f.point(p=t,v=n),g=c},lineEnd:function(){f.lineEnd(),p=v=NaN},clean:function(){return 2-h}}},function(t,n,e,r){var i;{var o;null==t?(i=e*mr,r.point(-yr,i),r.point(0,i),r.point(yr,i),r.point(yr,0),r.point(yr,-i),r.point(0,-i),r.point(-yr,-i),r.point(-yr,0),r.point(-yr,i)):br(t[0]-n[0])>dr?(o=t[0]<n[0]?yr:-yr,i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)):r.point(n[0],n[1])}},[-yr,-mr]);function ci(i){var E=Er(i),o=6*Mr,p=0<E,v=br(E)>dr;function g(t,n){return Er(t)*Er(n)>E}function d(t,n,e){var r=[1,0,0],i=Vr(qr(t),qr(n)),o=Or(i,i),u=i[0],a=o-u*u;if(!a)return!e&&t;var l=E*o/a,c=-E*u/a,s=Vr(r,i),f=Ir(r,l);Xr(f,Ir(i,c));var h=s,p=Or(f,h),v=Or(h,h),g=p*p-v*(Or(f,f)-1);if(!(g<0)){var d=Cr(g),y=Ir(h,(-p-d)/v);if(Xr(y,f),y=jr(y),!e)return y;var m,_=t[0],w=n[0],x=t[1],M=n[1];w<_&&(m=_,_=w,w=m);var b=w-_,S=br(b-yr)<dr;if(!S&&M<x&&(m=x,x=M,M=m),S||b<dr?S?0<x+M^y[1]<(br(y[0]-_)<dr?x:M):x<=y[1]&&y[1]<=M:yr<b^(_<=y[0]&&y[0]<=w)){var T=Ir(h,(-p+d)/v);return Xr(T,f),[y,jr(T)]}}}function y(t,n){var e=p?i:yr-i,r=0;return t<-e?r|=1:e<t&&(r|=2),n<-e?r|=4:e<n&&(r|=8),r}return oi(g,function(a){var l,c,s,f,h;return{lineStart:function(){f=s=!1,h=1},point:function(t,n){var e,r,i=[t,n],o=g(t,n),u=p?o?0:y(t,n):o?y(t+(t<0?yr:-yr),n):0;!l&&(f=s=o)&&a.lineStart(),o!==s&&((e=d(l,i))&&!Kr(l,e)&&!Kr(i,e)||(i[0]+=dr,i[1]+=dr,o=g(i[0],i[1]))),o!==s?(h=0,o?(a.lineStart(),e=d(i,l),a.point(e[0],e[1])):(e=d(l,i),a.point(e[0],e[1]),a.lineEnd()),l=e):v&&l&&p^o&&(u&c||!(r=d(i,l,!0))||(h=0,p?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))),!o||l&&Kr(l,i)||a.point(i[0],i[1]),l=i,s=o,c=u},lineEnd:function(){s&&a.lineEnd(),l=null},clean:function(){return h|(f&&s)<<1}}},function(t,n,e,r){!function(t,n,e,r,i,o){if(e){var u=Er(n),a=Nr(n),l=r*e;null==i?(i=n+r*wr,o=n-l/2):(i=Qr(u,i),o=Qr(u,o),(0<r?i<o:o<i)&&(i+=r*wr));for(var c,s=i;0<r?o<s:s<o;s-=l)c=jr([u,-a*Er(s),-a*Nr(s)]),t.point(c[0],c[1])}}(r,i,o,e,t,n)},p?[0,-i]:[-yr,i-yr])}var si=1e9,fi=-si;function hi(y,m,_,w){function x(t,n){return y<=t&&t<=_&&m<=n&&n<=w}function M(t,n,e,r){var i=0,o=0;if(null==t||(i=u(t,e))!==(o=u(n,e))||a(t,n)<0^0<e)for(;r.point(0===i||3===i?y:_,1<i?w:m),(i=(i+e+4)%4)!==o;);else r.point(n[0],n[1])}function u(t,n){return br(t[0]-y)<dr?0<n?0:3:br(t[0]-_)<dr?0<n?2:1:br(t[1]-m)<dr?0<n?1:0:0<n?3:2}function b(t,n){return a(t.x,n.x)}function a(t,n){var e=u(t,1),r=u(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(r){var i,f,o,u,a,l,c,s,h,p,v,g=r,t=Jr(),n={point:e,lineStart:function(){n.point=d,f&&f.push(o=[]);p=!0,h=!1,c=s=NaN},lineEnd:function(){i&&(d(u,a),l&&h&&t.rejoin(),i.push(t.result()));n.point=e,h&&g.lineEnd()},polygonStart:function(){g=t,i=[],f=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,e=f.length;n<e;++n)for(var r,i,o=f[n],u=1,a=o.length,l=o[0],c=l[0],s=l[1];u<a;++u)r=c,i=s,l=o[u],c=l[0],s=l[1],i<=w?w<s&&(s-i)*(y-r)<(c-r)*(w-i)&&++t:s<=w&&(c-r)*(w-i)<(s-i)*(y-r)&&--t;return t}(),n=v&&t,e=(i=E(i)).length;(n||e)&&(r.polygonStart(),n&&(r.lineStart(),M(null,null,1,r),r.lineEnd()),e&&ni(i,b,t,M,r),r.polygonEnd());g=r,i=f=o=null}};function e(t,n){x(t,n)&&g.point(t,n)}function d(t,n){var e,r,i=x(t,n);f&&o.push([t,n]),p?(u=t,a=n,p=!1,(l=i)&&(g.lineStart(),g.point(t,n))):i&&h?g.point(t,n):!function(t,n,e,r,i,o){var u=t[0],a=t[1],l=0,c=1,s=n[0]-u,f=n[1]-a,h=e-u;if(s||!(0<h)){if(h/=s,s<0){if(h<l)return;h<c&&(c=h)}else if(0<s){if(c<h)return;l<h&&(l=h)}if(h=i-u,s||!(h<0)){if(h/=s,s<0){if(c<h)return;l<h&&(l=h)}else if(0<s){if(h<l)return;h<c&&(c=h)}if(h=r-a,f||!(0<h)){if(h/=f,f<0){if(h<l)return;h<c&&(c=h)}else if(0<f){if(c<h)return;l<h&&(l=h)}if(h=o-a,f||!(h<0)){if(h/=f,f<0){if(c<h)return;l<h&&(l=h)}else if(0<f){if(h<l)return;h<c&&(c=h)}return 0<l&&(t[0]=u+l*s,t[1]=a+l*f),c<1&&(n[0]=u+c*s,n[1]=a+c*f),1}}}}}(e=[c=Math.max(fi,Math.min(si,c)),s=Math.max(fi,Math.min(si,s))],r=[t=Math.max(fi,Math.min(si,t)),n=Math.max(fi,Math.min(si,n))],y,m,_,w)?i&&(g.lineStart(),g.point(t,n),v=!1):(h||(g.lineStart(),g.point(e[0],e[1])),g.point(r[0],r[1]),i||g.lineEnd(),v=!1),c=t,s=n,h=i}return n}}function pi(t,n,e){var r=_(t,n-dr,e).concat(n);return function(n){return r.map(function(t){return[n,t]})}}function vi(t,n,e){var r=_(t,n-dr,e).concat(n);return function(n){return r.map(function(t){return[t,n]})}}function gi(t){return t}var di,yi,mi,_i,wi=hr(),xi=hr(),Mi={point:Ur,lineStart:Ur,lineEnd:Ur,polygonStart:function(){Mi.lineStart=bi,Mi.lineEnd=Ei},polygonEnd:function(){Mi.lineStart=Mi.lineEnd=Mi.point=Ur,wi.add(br(xi)),xi.reset()},result:function(){var t=wi/2;return wi.reset(),t}};function bi(){Mi.point=Si}function Si(t,n){Mi.point=Ti,di=mi=t,yi=_i=n}function Ti(t,n){xi.add(_i*t-mi*n),mi=t,_i=n}function Ei(){Ti(di,yi)}var ki=1/0,Ni=ki,Ai=-ki,Ci=Ai,Di={point:function(t,n){t<ki&&(ki=t);Ai<t&&(Ai=t);n<Ni&&(Ni=n);Ci<n&&(Ci=n)},lineStart:Ur,lineEnd:Ur,polygonStart:Ur,polygonEnd:Ur,result:function(){var t=[[ki,Ni],[Ai,Ci]];return Ai=Ci=-(Ni=ki=1/0),t}};var Ui,Fi,Pi,Yi,Li=0,zi=0,Hi=0,ji=0,qi=0,Oi=0,Vi=0,Xi=0,Ii=0,Ri={point:Bi,lineStart:Zi,lineEnd:Gi,polygonStart:function(){Ri.lineStart=Qi,Ri.lineEnd=Ji},polygonEnd:function(){Ri.point=Bi,Ri.lineStart=Zi,Ri.lineEnd=Gi},result:function(){var t=Ii?[Vi/Ii,Xi/Ii]:Oi?[ji/Oi,qi/Oi]:Hi?[Li/Hi,zi/Hi]:[NaN,NaN];return Li=zi=Hi=ji=qi=Oi=Vi=Xi=Ii=0,t}};function Bi(t,n){Li+=t,zi+=n,++Hi}function Zi(){Ri.point=$i}function $i(t,n){Ri.point=Wi,Bi(Pi=t,Yi=n)}function Wi(t,n){var e=t-Pi,r=n-Yi,i=Cr(e*e+r*r);ji+=i*(Pi+t)/2,qi+=i*(Yi+n)/2,Oi+=i,Bi(Pi=t,Yi=n)}function Gi(){Ri.point=Bi}function Qi(){Ri.point=Ki}function Ji(){to(Ui,Fi)}function Ki(t,n){Ri.point=to,Bi(Ui=Pi=t,Fi=Yi=n)}function to(t,n){var e=t-Pi,r=n-Yi,i=Cr(e*e+r*r);ji+=i*(Pi+t)/2,qi+=i*(Yi+n)/2,Oi+=i,Vi+=(i=Yi*t-Pi*n)*(Pi+t),Xi+=i*(Yi+n),Ii+=3*i,Bi(Pi=t,Yi=n)}function no(t){this._context=t}no.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,wr)}},result:Ur};var eo,ro,io,oo,uo,ao=hr(),lo={point:Ur,lineStart:function(){lo.point=co},lineEnd:function(){eo&&so(ro,io),lo.point=Ur},polygonStart:function(){eo=!0},polygonEnd:function(){eo=null},result:function(){var t=+ao;return ao.reset(),t}};function co(t,n){lo.point=so,ro=oo=t,io=uo=n}function so(t,n){oo-=t,uo-=n,ao.add(Cr(oo*oo+uo*uo)),oo=t,uo=n}function fo(){this._string=[]}function ho(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function po(r){return function(t){var n=new vo;for(var e in r)n[e]=r[e];return n.stream=t,n}}function vo(){}function go(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Hr(e,t.stream(Di)),n(Di.result()),null!=r&&t.clipExtent(r),t}function yo(u,a,t){return go(u,function(t){var n=a[1][0]-a[0][0],e=a[1][1]-a[0][1],r=Math.min(n/(t[1][0]-t[0][0]),e/(t[1][1]-t[0][1])),i=+a[0][0]+(n-r*(t[1][0]+t[0][0]))/2,o=+a[0][1]+(e-r*(t[1][1]+t[0][1]))/2;u.scale(150*r).translate([i,o])},t)}fo.prototype={_radius:4.5,_circle:ho(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=ho(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},vo.prototype={constructor:vo,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var mo=16,_o=Er(30*Mr);function wo(t,n){return+n?(A=t,C=n,function(i){var e,r,o,u,a,l,c,s,f,h,p,v,g={point:t,lineStart:n,lineEnd:y,polygonStart:function(){i.polygonStart(),g.lineStart=m},polygonEnd:function(){i.polygonEnd(),g.lineStart=n}};function t(t,n){t=A(t,n),i.point(t[0],t[1])}function n(){s=NaN,g.point=d,i.lineStart()}function d(t,n){var e=qr([t,n]),r=A(t,n);D(s,f,c,h,p,v,s=r[0],f=r[1],c=t,h=e[0],p=e[1],v=e[2],mo,i),i.point(s,f)}function y(){g.point=t,i.lineEnd()}function m(){n(),g.point=_,g.lineEnd=w}function _(t,n){d(e=t,n),r=s,o=f,u=h,a=p,l=v,g.point=d}function w(){D(s,f,c,h,p,v,r,o,e,u,a,l,mo,i),(g.lineEnd=y)()}return g}):(e=t,po({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}}));var e,A,C;function D(t,n,e,r,i,o,u,a,l,c,s,f,h,p){var v,g,d,y,m,_,w,x,M,b,S,T,E=u-t,k=a-n,N=E*E+k*k;4*C<N&&h--&&(d=o+f,m=Dr(d/=y=Cr((v=r+c)*v+(g=i+s)*g+d*d)),_=br(br(d)-1)<dr||br(e-l)<dr?(e+l)/2:Tr(g,v),x=(w=A(_,m))[0],M=w[1],(C<(T=k*(b=x-t)-E*(S=M-n))*T/N||.3<br((E*b+k*S)/N-.5)||r*c+i*s+o*f<_o)&&(D(t,n,e,r,i,o,x,M,_,v/=y,g/=y,d,h,p),p.point(x,M),D(x,M,_,v,g,d,u,a,l,c,s,f,h,p)))}}var xo,Mo=po({point:function(t,n){this.stream.point(t*Mr,n*Mr)}});function bo(t,e,r,i,o,n){var u=Er(n),a=Nr(n),l=u*t,c=a*t,s=u/t,f=a/t,h=(a*r-u*e)/t,p=(a*e+u*r)/t;function v(t,n){return[l*(t*=i)-c*(n*=o)+e,r-c*t-l*n]}return v.invert=function(t,n){return[i*(s*t-f*n+h),o*(p-f*t-s*n)]},v}function So(t){return i=function(){return t},d=150,y=480,m=250,S=b=M=x=w=_=0,E=T=1,N=li,A=k=null,C=gi,D=.5,e.stream=function(t){return v&&g===t?v:v=Mo((r=a,po({point:function(t,n){var e=r(t,n);return this.stream.point(e[0],e[1])}})(N(f(C(g=t))))));var r},e.preclip=function(t){return arguments.length?(N=t,k=void 0,o()):N},e.postclip=function(t){return arguments.length?(C=t,A=l=c=s=null,o()):C},e.clipAngle=function(t){return arguments.length?(N=+t?ci(k=t*Mr):(k=null,li),o()):k*xr},e.clipExtent=function(t){return arguments.length?(C=null==t?(A=l=c=s=null,gi):hi(A=+t[0][0],l=+t[0][1],c=+t[1][0],s=+t[1][1]),o()):null==A?null:[[A,l],[c,s]]},e.scale=function(t){return arguments.length?(d=+t,r()):d},e.translate=function(t){return arguments.length?(y=+t[0],m=+t[1],r()):[y,m]},e.center=function(t){return arguments.length?(_=t[0]%360*Mr,w=t[1]%360*Mr,r()):[_*xr,w*xr]},e.rotate=function(t){return arguments.length?(x=t[0]%360*Mr,M=t[1]%360*Mr,b=2<t.length?t[2]%360*Mr:0,r()):[x*xr,M*xr,b*xr]},e.angle=function(t){return arguments.length?(S=t%360*Mr,r()):S*xr},e.reflectX=function(t){return arguments.length?(T=t?-1:1,r()):T<0},e.reflectY=function(t){return arguments.length?(E=t?-1:1,r()):E<0},e.precision=function(t){return arguments.length?(f=wo(h,D=t*t),o()):Cr(D)},e.fitExtent=function(t,n){return yo(e,t,n)},e.fitSize=function(t,n){return yo(e,[[0,0],t],n)},e.fitWidth=function(t,n){return u=t,go(o=e,function(t){var n=+u,e=n/(t[1][0]-t[0][0]),r=(n-e*(t[1][0]+t[0][0]))/2,i=-e*t[0][1];o.scale(150*e).translate([r,i])},n);var o,u},e.fitHeight=function(t,n){return u=t,go(o=e,function(t){var n=+u,e=n/(t[1][1]-t[0][1]),r=-e*t[0][0],i=(n-e*(t[1][1]+t[0][1]))/2;o.scale(150*e).translate([r,i])},n);var o,u},function(){return u=i.apply(this,arguments),e.invert=u.invert&&n,r()}();function e(t){return p(t[0]*Mr,t[1]*Mr)}function n(t){return(t=p.invert(t[0],t[1]))&&[t[0]*xr,t[1]*xr]}function r(){var t,n,e,r=bo(d,0,0,T,E,S).apply(null,u(_,w)),i=(S?bo:function(e,r,i,o,u){function t(t,n){return[r+e*(t*=o),i-e*(n*=u)]}return t.invert=function(t,n){return[(t-r)/e*o,(i-n)/e*u]},t})(d,y-r[0],m-r[1],T,E,S);return t=x,n=M,e=b,a=(t%=wr)?n||e?Br(Wr(t),Gr(n,e)):Wr(t):n||e?Gr(n,e):Zr,h=Br(u,i),p=Br(a,h),f=wo(h,D),o()}function o(){return v=g=null,e}var i,u,a,l,c,s,f,h,p,v,g,d,y,m,_,w,x,M,b,S,T,E,k,N,A,C,D}function To(t,n){return[Er(n)*Nr(t),Nr(n)]}function Eo(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}To.invert=(xo=Dr,function(t,n){var e=Cr(t*t+n*n),r=xo(e),i=Nr(r),o=Er(r);return[Tr(t*i,e*o),Dr(e&&n*i/e)]});var ko=Array.prototype,No=ko.map,Ao=ko.slice,Co={name:"implicit"};function Do(){var o=We(),u=[],r=[],i=Co;function a(t){var n=t+"",e=o.get(n);if(!e){if(i!==Co)return i;o.set(n,e=u.push(t))}return r[(e-1)%r.length]}return a.domain=function(t){if(!arguments.length)return u.slice();u=[],o=We();for(var n,e,r=-1,i=t.length;++r<i;)o.has(e=(n=t[r])+"")||o.set(e,u.push(n));return a},a.range=function(t){return arguments.length?(r=Ao.call(t),a):r.slice()},a.unknown=function(t){return arguments.length?(i=t,a):i},a.copy=function(){return Do(u,r).unknown(i)},Eo.apply(a,arguments),a}function Uo(t){return+t}var Fo=[0,1];function Po(t){return t}function Yo(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:(t=isNaN(e)?NaN:.5,function(){return t});var t}function Lo(t){var n,e=t[0],r=t[t.length-1];return r<e&&(n=e,e=r,r=n),function(t){return Math.max(e,Math.min(r,t))}}function zo(t,n,e){var r=t[0],i=t[1],o=n[0],u=n[1],o=i<r?(r=Yo(i,r),e(u,o)):(r=Yo(r,i),e(o,u));return function(t){return o(r(t))}}function Ho(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),u=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<r;)i[u]=Yo(e[u],e[u+1]),o[u]=n(t[u],t[u+1]);return function(t){var n=a(e,t,1,r)-1;return o[n](i[n](t))}}function jo(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function qo(t,n){return f=s=Fo,h=hn,p=Po,r.invert=function(t){return p(o((c=c||a(f,s.map(i),ln))(t)))},r.domain=function(t){return arguments.length?(s=No.call(t,Uo),p===Po||(p=Lo(s)),e()):s.slice()},r.range=function(t){return arguments.length?(f=Ao.call(t),e()):f.slice()},r.rangeRound=function(t){return f=Ao.call(t),h=pn,e()},r.clamp=function(t){return arguments.length?(p=t?Lo(s):Po,r):p!==Po},r.interpolate=function(t){return arguments.length?(h=t,e()):h},r.unknown=function(t){return arguments.length?(u=t,r):u},function(t,n){return i=t,o=n,e()}(t,n);function e(){return a=2<Math.min(s.length,f.length)?Ho:zo,l=c=null,r}function r(t){return isNaN(t=+t)?u:(l=l||a(s.map(i),f,h))(i(p(t)))}var i,o,u,a,l,c,s,f,h,p}function Oo(t,n,e,r){var i,o,u,a,l,c,s=T(t,n,e);switch((r=nr(null==r?",f":r)).type){case"s":var f=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN((l=s,c=f,i=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Je(c)/3)))-Je(Math.abs(l)))))||(r.precision=i),lr(r,f);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN((u=s,a=Math.max(Math.abs(t),Math.abs(n)),u=Math.abs(u),a=Math.abs(a)-u,i=Math.max(0,Je(a)-Je(u))+1))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN((o=s,i=Math.max(0,-Je(Math.abs(o)))))||(r.precision=i-2*("%"===r.type))}return ar(r)}var Vo=new Date,Xo=new Date;function Io(o,u,e,r){function a(t){return o(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return o(t=new Date(+t)),t},a.ceil=function(t){return o(t=new Date(t-1)),u(t,1),o(t),t},a.round=function(t){var n=a(t),e=a.ceil(t);return t-n<e-t?n:e},a.offset=function(t,n){return u(t=new Date(+t),null==n?1:Math.floor(n)),t},a.range=function(t,n,e){var r,i=[];if(t=a.ceil(t),e=null==e?1:Math.floor(e),!(t<n&&0<e))return i;for(;i.push(r=new Date(+t)),u(t,e),o(t),r<t&&t<n;);return i},a.filter=function(e){return Io(function(t){if(t<=t)for(;o(t),!e(t);)t.setTime(t-1)},function(t,n){if(t<=t)if(n<0)for(;++n<=0;)for(;u(t,-1),!e(t););else for(;0<=--n;)for(;u(t,1),!e(t););})},e&&(a.count=function(t,n){return Vo.setTime(+t),Xo.setTime(+n),o(Vo),o(Xo),Math.floor(e(Vo,Xo))},a.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?a.filter(r?function(t){return r(t)%n==0}:function(t){return a.count(0,t)%n==0}):a:null}),a}var Ro=Io(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});Ro.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?Io(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Ro:null};var Bo=Io(function(t){t.setTime(t-t.getMilliseconds())},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),Zo=Io(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1});function $o(n){return Io(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var Wo=$o(0),Go=$o(1),Qo=($o(2),$o(3),$o(4)),Jo=($o(5),$o(6),Io(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Jo.every=function(e){return isFinite(e=Math.floor(e))&&0<e?Io(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var Ko=Io(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+6e4*n)},function(t,n){return(n-t)/6e4},function(t){return t.getUTCMinutes()}),tu=Io(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()}),nu=Io(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1});function eu(n){return Io(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/6048e5})}var ru=eu(0),iu=eu(1),ou=(eu(2),eu(3),eu(4)),uu=(eu(5),eu(6),Io(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),au=Io(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});function lu(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function cu(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function su(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function fu(t){var r=t.dateTime,i=t.date,o=t.time,n=t.periods,e=t.days,u=t.shortDays,a=t.months,l=t.shortMonths,c=wu(n),s=xu(n),f=wu(e),h=xu(e),p=wu(u),v=xu(u),g=wu(a),d=xu(a),y=wu(l),m=xu(l),_={a:function(t){return u[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Vu,e:Vu,f:Zu,H:Xu,I:Iu,j:Ru,L:Bu,m:$u,M:Wu,p:function(t){return n[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:ba,s:Sa,S:Gu,u:Qu,U:Ju,V:Ku,w:ta,W:na,x:null,X:null,y:ea,Y:ra,Z:ia,"%":Ma},w={a:function(t){return u[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:oa,e:oa,f:sa,H:ua,I:aa,j:la,L:ca,m:fa,M:ha,p:function(t){return n[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:ba,s:Sa,S:pa,u:va,U:ga,V:da,w:ya,W:ma,x:null,X:null,y:_a,Y:wa,Z:xa,"%":Ma},x={a:function(t,n,e){var r=p.exec(n.slice(e));return r?(t.w=v[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.w=h[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=y.exec(n.slice(e));return r?(t.m=m[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.m=d[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,n,e){return S(t,r,n,e)},d:Uu,e:Uu,f:Hu,H:Pu,I:Pu,j:Fu,L:zu,m:Du,M:Yu,p:function(t,n,e){var r=c.exec(n.slice(e));return r?(t.p=s[r[0].toLowerCase()],e+r[0].length):-1},q:Cu,Q:qu,s:Ou,S:Lu,u:bu,U:Su,V:Tu,w:Mu,W:Eu,x:function(t,n,e){return S(t,i,n,e)},X:function(t,n,e){return S(t,o,n,e)},y:Nu,Y:ku,Z:Au,"%":ju};function M(l,c){return function(t){var n,e,r,i=[],o=-1,u=0,a=l.length;for(t instanceof Date||(t=new Date(+t));++o<a;)37===l.charCodeAt(o)&&(i.push(l.slice(u,o)),null!=(e=vu[n=l.charAt(++o)])?n=l.charAt(++o):e="e"===n?" ":"0",(r=c[n])&&(n=r(t,e)),i.push(n),u=o+1);return i.push(l.slice(u,o)),i.join("")}}function b(i,o){return function(t){var n,e,r=su(1900,void 0,1);if(S(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!o||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(n=4<(e=(n=cu(su(r.y,0,1))).getUTCDay())||0===e?iu.ceil(n):iu(n),n=nu.offset(n,7*(r.V-1)),r.y=n.getUTCFullYear(),r.m=n.getUTCMonth(),r.d=n.getUTCDate()+(r.w+6)%7):(n=4<(e=(n=lu(su(r.y,0,1))).getDay())||0===e?Go.ceil(n):Go(n),n=Zo.offset(n,7*(r.V-1)),r.y=n.getFullYear(),r.m=n.getMonth(),r.d=n.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),e="Z"in r?cu(su(r.y,0,1)).getUTCDay():lu(su(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(e+5)%7:r.w+7*r.U-(e+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,cu(r)):lu(r)}}function S(t,n,e,r){for(var i,o,u=0,a=n.length,l=e.length;u<a;){if(l<=r)return-1;if(37===(i=n.charCodeAt(u++))){if(i=n.charAt(u++),!(o=x[i in vu?n.charAt(u++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return _.x=M(i,_),_.X=M(o,_),_.c=M(r,_),w.x=M(i,w),w.X=M(o,w),w.c=M(r,w),{format:function(t){var n=M(t+="",_);return n.toString=function(){return t},n},parse:function(t){var n=b(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=M(t+="",w);return n.toString=function(){return t},n},utcParse:function(t){var n=b(t+="",!0);return n.toString=function(){return t},n}}}au.every=function(e){return isFinite(e=Math.floor(e))&&0<e?Io(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var hu,pu,vu={"-":"",_:" ",0:"0"},gu=/^\s*\d+/,du=/^%/,yu=/[\\^$*+?|[\]().{}]/g;function mu(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function _u(t){return t.replace(yu,"\\$&")}function wu(t){return new RegExp("^(?:"+t.map(_u).join("|")+")","i")}function xu(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function Mu(t,n,e){var r=gu.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function bu(t,n,e){var r=gu.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Su(t,n,e){var r=gu.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function Tu(t,n,e){var r=gu.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Eu(t,n,e){var r=gu.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function ku(t,n,e){var r=gu.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Nu(t,n,e){var r=gu.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(68<+r[0]?1900:2e3),e+r[0].length):-1}function Au(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Cu(t,n,e){var r=gu.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function Du(t,n,e){var r=gu.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Uu(t,n,e){var r=gu.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function Fu(t,n,e){var r=gu.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function Pu(t,n,e){var r=gu.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function Yu(t,n,e){var r=gu.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function Lu(t,n,e){var r=gu.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function zu(t,n,e){var r=gu.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function Hu(t,n,e){var r=gu.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function ju(t,n,e){var r=du.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function qu(t,n,e){var r=gu.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function Ou(t,n,e){var r=gu.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function Vu(t,n){return mu(t.getDate(),n,2)}function Xu(t,n){return mu(t.getHours(),n,2)}function Iu(t,n){return mu(t.getHours()%12||12,n,2)}function Ru(t,n){return mu(1+Zo.count(Jo(t),t),n,3)}function Bu(t,n){return mu(t.getMilliseconds(),n,3)}function Zu(t,n){return Bu(t,n)+"000"}function $u(t,n){return mu(t.getMonth()+1,n,2)}function Wu(t,n){return mu(t.getMinutes(),n,2)}function Gu(t,n){return mu(t.getSeconds(),n,2)}function Qu(t){var n=t.getDay();return 0===n?7:n}function Ju(t,n){return mu(Wo.count(Jo(t)-1,t),n,2)}function Ku(t,n){var e=t.getDay();return t=4<=e||0===e?Qo(t):Qo.ceil(t),mu(Qo.count(Jo(t),t)+(4===Jo(t).getDay()),n,2)}function ta(t){return t.getDay()}function na(t,n){return mu(Go.count(Jo(t)-1,t),n,2)}function ea(t,n){return mu(t.getFullYear()%100,n,2)}function ra(t,n){return mu(t.getFullYear()%1e4,n,4)}function ia(t){var n=t.getTimezoneOffset();return(0<n?"-":(n*=-1,"+"))+mu(n/60|0,"0",2)+mu(n%60,"0",2)}function oa(t,n){return mu(t.getUTCDate(),n,2)}function ua(t,n){return mu(t.getUTCHours(),n,2)}function aa(t,n){return mu(t.getUTCHours()%12||12,n,2)}function la(t,n){return mu(1+nu.count(au(t),t),n,3)}function ca(t,n){return mu(t.getUTCMilliseconds(),n,3)}function sa(t,n){return ca(t,n)+"000"}function fa(t,n){return mu(t.getUTCMonth()+1,n,2)}function ha(t,n){return mu(t.getUTCMinutes(),n,2)}function pa(t,n){return mu(t.getUTCSeconds(),n,2)}function va(t){var n=t.getUTCDay();return 0===n?7:n}function ga(t,n){return mu(ru.count(au(t)-1,t),n,2)}function da(t,n){var e=t.getUTCDay();return t=4<=e||0===e?ou(t):ou.ceil(t),mu(ou.count(au(t),t)+(4===au(t).getUTCDay()),n,2)}function ya(t){return t.getUTCDay()}function ma(t,n){return mu(iu.count(au(t)-1,t),n,2)}function _a(t,n){return mu(t.getUTCFullYear()%100,n,2)}function wa(t,n){return mu(t.getUTCFullYear()%1e4,n,4)}function xa(){return"+0000"}function Ma(){return"%"}function ba(t){return+t}function Sa(t){return Math.floor(t/1e3)}hu=fu({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),hu.format,hu.parse,pu=hu.utcFormat,hu.utcParse;var Ta=1e3,Ea=60*Ta,ka=60*Ea,Na=24*ka,Aa=7*Na,Ca=30*Na,Da=365*Na;function Ua(t){return new Date(t)}function Fa(t){return t instanceof Date?+t:+new Date(+t)}function Pa(u,n,e,r,i,o,a,l,c){var s=qo(Po,Po),f=s.invert,h=s.domain,p=c(".%L"),v=c(":%S"),g=c("%I:%M"),d=c("%I %p"),y=c("%a %d"),m=c("%b %d"),_=c("%B"),w=c("%Y"),x=[[a,1,Ta],[a,5,5*Ta],[a,15,15*Ta],[a,30,30*Ta],[o,1,Ea],[o,5,5*Ea],[o,15,15*Ea],[o,30,30*Ea],[i,1,ka],[i,3,3*ka],[i,6,6*ka],[i,12,12*ka],[r,1,Na],[r,2,2*Na],[e,1,Aa],[n,1,Ca],[n,3,3*Ca],[u,1,Da]];function M(t){return(a(t)<t?p:o(t)<t?v:i(t)<t?g:r(t)<t?d:n(t)<t?e(t)<t?y:m:u(t)<t?_:w)(t)}function b(t,n,e,r){var i,o;return null==t&&(t=10),"number"==typeof t&&(i=Math.abs(e-n)/t,t=(o=S(function(t){return t[2]}).right(x,i))===x.length?(r=T(n/Da,e/Da,t),u):o?(r=(o=x[i/x[o-1][2]<x[o][2]/i?o-1:o])[1],o[0]):(r=Math.max(T(n,e,t),1),l)),null==r?t:t.every(r)}return s.invert=function(t){return new Date(f(t))},s.domain=function(t){return arguments.length?h(No.call(t,Fa)):h().map(Ua)},s.ticks=function(t,n){var e,r=h(),i=r[0],o=r[r.length-1],u=o<i;return u&&(e=i,i=o,o=e),e=(e=b(t,i,o,n))?e.range(i,o+1):[],u?e.reverse():e},s.tickFormat=function(t,n){return null==n?M:c(n)},s.nice=function(t,n){var e,r,i,o,u,a,l,c=h();return(t=b(t,c[0],c[c.length-1],n))?h((r=t,o=0,u=(e=(e=c).slice()).length-1,a=e[o],(l=e[u])<a&&(i=o,o=u,u=i,i=a,a=l,l=i),e[o]=r.floor(a),e[u]=r.ceil(l),e)):s},s.copy=function(){return jo(s,Pa(u,n,e,r,i,o,a,l,c))},s}function Ya(t){return function(){return t}}function La(t){this._context=t}function za(t){return new La(t)}function Ha(t){return t[0]}function ja(t){return t[1]}function qa(t){return t<0?-1:1}function Oa(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),u=(e-t._y1)/(i||r<0&&-0),a=(o*i+u*r)/(r+i);return(qa(o)+qa(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(a))||0}function Va(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Xa(t,n,e){var r=t._x0,i=t._y0,o=t._x1,u=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*n,o-a,u-a*e,o,u)}function Ia(t){this._context=t}La.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},Ia.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Xa(this,this._t0,Va(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Xa(this,Va(this,e=Oa(this,t,n)),e);break;default:Xa(this,this._t0,e=Oa(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},Object.create(Ia.prototype).point=function(t,n){Ia.prototype.point.call(this,n,t)},X.ascending=r,X.axisBottom=function(t){return n(C,t)},X.axisLeft=function(t){return n(D,t)},X.axisRight=function(t){return n(A,t)},X.brushX=function(){return j=Ae,e=He,O=ze,l=je,V=!0,c=x("start","brush","end"),s=6,n.move=function(t,a){t.selection?t.on("start.brush",function(){H(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){H(this,arguments).end()}).tween("brush",function(){var n=this,e=n.__brush,r=H(n,arguments),t=e.selection,i=j.input("function"==typeof a?a.apply(this,arguments):a,e.extent),o=hn(t,i);function u(t){e.selection=1===t&&null===i?null:o(t),z.call(n),r.brush()}return null!==t&&null!==i?u:u(1)}):t.each(function(){var t=this,n=arguments,e=t.__brush,r=j.input("function"==typeof a?a.apply(t,n):a,e.extent),i=H(t,n).beforestart();ee(t),e.selection=null===r?null:r,z.call(t),i.start().brush().end()})},n.clear=function(t){n.move(t,null)},r.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){ct(new we(n,t,j.output(this.state.selection)),c.apply,c,[t,this.that,this.args])}},n.extent=function(t){return arguments.length?(e="function"==typeof t?t:_e(Ne(t)),n):e},n.filter=function(t){return arguments.length?(O="function"==typeof t?t:_e(!!t),n):O},n.touchable=function(t){return arguments.length?(l="function"==typeof t?t:_e(!!t),n):l},n.handleSize=function(t){return arguments.length?(s=+t,n):s},n.keyModifiers=function(t){return arguments.length?(V=!!t,n):V},n.on=function(){var t=c.on.apply(c,arguments);return t===c?n:t},n;function n(t){var n=t.property("__brush",a).selectAll(".overlay").data([Le("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",De.overlay).merge(n).each(function(){var t=qe(this).extent;vt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Le("selection")]).enter().append("rect").attr("class","selection").attr("cursor",De.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var e=t.selectAll(".handle").data(j.handles,function(t){return t.type});e.exit().remove(),e.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return De[t.type]}),t.each(z).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",i).filter(l).on("touchstart.brush",i).on("touchmove.brush",o).on("touchend.brush touchcancel.brush",u).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function z(){var t=vt(this),n=qe(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?n[1][0]-s/2:n[0][0]-s/2}).attr("y",function(t){return"s"===t.type[0]?n[1][1]-s/2:n[0][1]-s/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+s:s}).attr("height",function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+s:s})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function H(t,n,e){return!e&&t.__brush.emitter||new r(t,n)}function r(t,n){this.that=t,this.args=n,this.state=t.__brush,this.active=0}function i(){var n,e,r,i,o,u,t,a,l,c,s,f,h,p,v,g,d,y,m,_,w,x,M,b,S,T,E,k,N,A,C,D,U,F;function P(){var t=E(n);!b||S||T||(Math.abs(t[0]-N[0])>Math.abs(t[1]-N[1])?T=!0:S=!0),N=t,M=!0,Me(),Y()}function Y(){var t;switch(w=N[0]-k[0],x=N[1]-k[1],r){case Se:case be:i&&(w=Math.max(l-c,Math.min(v-g,w)),s=c+w,d=g+w),o&&(x=Math.max(f-h,Math.min(y-m,x)),p=h+x,_=m+x);break;case Te:i<0?(w=Math.max(l-c,Math.min(v-c,w)),s=c+w,d=g):0<i&&(w=Math.max(l-g,Math.min(v-g,w)),s=c,d=g+w),o<0?(x=Math.max(f-h,Math.min(y-h,x)),p=h+x,_=m):0<o&&(x=Math.max(f-m,Math.min(y-m,x)),p=h,_=m+x);break;case Ee:i&&(s=Math.max(l,Math.min(v,c-w*i)),d=Math.max(l,Math.min(v,g+w*i))),o&&(p=Math.max(f,Math.min(y,h-x*o)),_=Math.max(f,Math.min(y,m+x*o)))}d<s&&(i*=-1,t=c,c=g,g=t,t=s,s=d,d=t,e in Ue&&U.attr("cursor",De[e=Ue[e]])),_<p&&(o*=-1,t=h,h=m,m=t,t=p,p=_,_=t,e in Fe&&U.attr("cursor",De[e=Fe[e]])),u.selection&&(a=u.selection),S&&(s=a[0][0],d=a[1][0]),T&&(p=a[0][1],_=a[1][1]),a[0][0]===s&&a[0][1]===p&&a[1][0]===d&&a[1][1]===_||(u.selection=[[s,p],[d,_]],z.call(n),A.brush())}function L(){if(xe(),X.event.touches){if(X.event.touches.length)return;q&&clearTimeout(q),q=setTimeout(function(){q=null},500)}else Mt(X.event.view,M),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var t;D.attr("pointer-events","all"),U.attr("cursor",De.overlay),u.selection&&(a=u.selection),(t=a)[0][0]!==t[1][0]&&t[0][1]!==t[1][1]||(u.selection=null,z.call(n)),A.end()}q&&!X.event.touches||O.apply(this,arguments)&&(n=this,e=X.event.target.__data__.type,r="selection"===(V&&X.event.metaKey?e="overlay":e)?be:V&&X.event.altKey?Ee:Te,i=j===Ce?null:Pe[e],o=j===Ae?null:Ye[e],t=(u=qe(n)).extent,a=u.selection,l=t[0][0],f=t[0][1],v=t[1][0],y=t[1][1],x=w=0,b=i&&o&&V&&X.event.shiftKey,E=X.event.touches?(C=X.event.changedTouches[0].identifier,function(t){return mt(t,X.event.touches,C)}):yt,k=E(n),N=k,A=H(n,arguments,!0).beforestart(),"overlay"===e?(a&&(M=!0),u.selection=a=[[c=j===Ce?l:k[0],h=j===Ae?f:k[1]],[g=j===Ce?v:c,m=j===Ae?y:h]]):(c=a[0][0],h=a[0][1],g=a[1][0],m=a[1][1]),s=c,p=h,d=g,_=m,D=vt(n).attr("pointer-events","none"),U=D.selectAll(".overlay").attr("cursor",De[e]),X.event.touches?(A.moved=P,A.ended=L):(F=vt(X.event.view).on("mousemove.brush",P,!0).on("mouseup.brush",L,!0),V&&F.on("keydown.brush",function(){switch(X.event.keyCode){case 16:b=i&&o;break;case 18:r===Te&&(i&&(g=d-w*i,c=s+w*i),o&&(m=_-x*o,h=p+x*o),r=Ee,Y());break;case 32:r!==Te&&r!==Ee||(i<0?g=d-w:0<i&&(c=s-w),o<0?m=_-x:0<o&&(h=p-x),r=Se,U.attr("cursor",De.selection),Y());break;default:return}Me()},!0).on("keyup.brush",function(){switch(X.event.keyCode){case 16:b&&(S=T=b=!1,Y());break;case 18:r===Ee&&(i<0?g=d:0<i&&(c=s),o<0?m=_:0<o&&(h=p),r=Te,Y());break;case 32:r===Se&&(r=X.event.altKey?(i&&(g=d-w*i,c=s+w*i),o&&(m=_-x*o,h=p+x*o),Ee):(i<0?g=d:0<i&&(c=s),o<0?m=_:0<o&&(h=p),Te),U.attr("cursor",De[e]),Y());break;default:return}Me()},!0),xt(X.event.view)),xe(),ee(n),z.call(n),A.start())}function o(){H(this,arguments).moved()}function u(){H(this,arguments).ended()}function a(){var t=this.__brush||{selection:null};return t.extent=Ne(e.apply(this,arguments)),t.dim=j,t}var j,q,e,O,l,V,c,s},X.create=function(t){return vt(m(t).call(document.documentElement))},X.curveMonotoneX=function(t){return new Ia(t)},X.drag=function(){var e,r,i,o,u=Tt,a=Et,n=kt,l=Nt,v={},g=x("start","drag","end"),d=0,c=0;function y(t){t.on("mousedown.drag",s).filter(l).on("touchstart.drag",p).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function s(){var t;o||!u.apply(this,arguments)||(t=w("mouse",a.apply(this,arguments),yt,this,arguments))&&(vt(X.event.view).on("mousemove.drag",f,!0).on("mouseup.drag",h,!0),xt(X.event.view),_t(),i=!1,e=X.event.clientX,r=X.event.clientY,t("start"))}function f(){var t,n;wt(),i||(t=X.event.clientX-e,n=X.event.clientY-r,i=c<t*t+n*n),v.mouse("drag")}function h(){vt(X.event.view).on("mousemove.drag mouseup.drag",null),Mt(X.event.view,i),wt(),v.mouse("end")}function p(){if(u.apply(this,arguments))for(var t,n=X.event.changedTouches,e=a.apply(this,arguments),r=n.length,i=0;i<r;++i)(t=w(n[i].identifier,e,mt,this,arguments))&&(_t(),t("start"))}function m(){for(var t,n=X.event.changedTouches,e=n.length,r=0;r<e;++r)(t=v[n[r].identifier])&&(wt(),t("drag"))}function _(){var t,n,e=X.event.changedTouches,r=e.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),t=0;t<r;++t)(n=v[e[t].identifier])&&(_t(),n("end"))}function w(i,o,u,a,l){var c,s,f,h=u(o,i),p=g.copy();if(ct(new St(y,"beforestart",c,i,d,h[0],h[1],0,0,p),function(){return null!=(X.event.subject=c=n.apply(a,l))&&(s=c.x-h[0]||0,f=c.y-h[1]||0,!0)}))return function t(n){var e,r=h;switch(n){case"start":v[i]=t,e=d++;break;case"end":delete v[i],--d;case"drag":h=u(o,i),e=d}ct(new St(y,n,c,i,e,h[0]+s,h[1]+f,h[0]-r[0],h[1]-r[1],p),p.apply,p,[n,a,l])}}return y.filter=function(t){return arguments.length?(u="function"==typeof t?t:bt(!!t),y):u},y.container=function(t){return arguments.length?(a="function"==typeof t?t:bt(t),y):a},y.subject=function(t){return arguments.length?(n="function"==typeof t?t:bt(t),y):n},y.touchable=function(t){return arguments.length?(l="function"==typeof t?t:bt(!!t),y):l},y.on=function(){var t=g.on.apply(g,arguments);return t===g?y:t},y.clickDistance=function(t){return arguments.length?(c=(t=+t)*t,y):Math.sqrt(c)},y},X.easeLinear=function(t){return+t},X.extent=function(t,n){var e,r,i,o=t.length,u=-1;if(null==n){for(;++u<o;)if(null!=(e=t[u])&&e<=e)for(r=i=e;++u<o;)null!=(e=t[u])&&(e<r&&(r=e),i<e&&(i=e))}else for(;++u<o;)if(null!=(e=n(t[u],u,t))&&e<=e)for(r=i=e;++u<o;)null!=(e=n(t[u],u,t))&&(e<r&&(r=e),i<e&&(i=e));return[r,i]},X.geoGraticule=function(){var n,e,r,i,o,u,a,l,c,s,f,h,p=10,v=p,g=90,d=360,y=2.5;function m(){return{type:"MultiLineString",coordinates:t()}}function t(){return _(kr(i/g)*g,r,g).map(f).concat(_(kr(l/d)*d,a,d).map(h)).concat(_(kr(e/p)*p,n,p).filter(function(t){return br(t%g)>dr}).map(c)).concat(_(kr(u/v)*v,o,v).filter(function(t){return br(t%d)>dr}).map(s))}return m.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},m.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(h(a).slice(1),f(r).reverse().slice(1),h(l).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],l=+t[0][1],a=+t[1][1],r<i&&(t=i,i=r,r=t),a<l&&(t=l,l=a,a=t),m.precision(y)):[[i,l],[r,a]]},m.extentMinor=function(t){return arguments.length?(e=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],n<e&&(t=e,e=n,n=t),o<u&&(t=u,u=o,o=t),m.precision(y)):[[e,u],[n,o]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(g=+t[0],d=+t[1],m):[g,d]},m.stepMinor=function(t){return arguments.length?(p=+t[0],v=+t[1],m):[p,v]},m.precision=function(t){return arguments.length?(y=+t,c=pi(u,o,90),s=vi(e,n,y),f=pi(l,a,90),h=vi(i,r,y),m):y},m.extentMajor([[-180,-90+dr],[180,90-dr]]).extentMinor([[-180,-80-dr],[180,80+dr]])},X.geoOrthographic=function(){return So(To).scale(249.5).clipAngle(90+dr)},X.geoPath=function(n,e){var r,i,o=4.5;function u(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),Hr(t,r(i))),i.result()}return u.area=function(t){return Hr(t,r(Mi)),Mi.result()},u.measure=function(t){return Hr(t,r(lo)),lo.result()},u.bounds=function(t){return Hr(t,r(Di)),Di.result()},u.centroid=function(t){return Hr(t,r(Ri)),Ri.result()},u.projection=function(t){return arguments.length?(r=null==t?(n=null,gi):(n=t).stream,u):n},u.context=function(t){return arguments.length?(i=null==t?(e=null,new fo):new no(e=t),"function"!=typeof o&&i.pointRadius(o),u):e},u.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),u):o},u.projection(n).context(e)},X.json=function(t,n){return fetch(t,n).then(Ge)},X.line=function(){var u=Ha,a=ja,l=Ya(!0),c=null,s=za,f=null;function n(t){var n,e,r,i=t.length,o=!1;for(null==c&&(f=s(r=Be())),n=0;n<=i;++n)!(n<i&&l(e=t[n],n,t))===o&&((o=!o)?f.lineStart():f.lineEnd()),o&&f.point(+u(e,n,t),+a(e,n,t));if(r)return f=null,r+""||null}return n.x=function(t){return arguments.length?(u="function"==typeof t?t:Ya(+t),n):u},n.y=function(t){return arguments.length?(a="function"==typeof t?t:Ya(+t),n):a},n.defined=function(t){return arguments.length?(l="function"==typeof t?t:Ya(!!t),n):l},n.curve=function(t){return arguments.length?(s=t,null!=c&&(f=s(c)),n):s},n.context=function(t){return arguments.length?(null==t?c=f=null:f=s(c=t),n):c},n},X.max=function(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e<=e)for(r=e;++o<i;)null!=(e=t[o])&&r<e&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e<=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&r<e&&(r=e);return r},X.min=function(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e<=e)for(r=e;++o<i;)null!=(e=t[o])&&e<r&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e<=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&e<r&&(r=e);return r},X.mouse=yt,X.now=Yn,X.polygonContains=function(t,n){for(var e,r,i=t.length,o=t[i-1],u=n[0],a=n[1],l=o[0],c=o[1],s=!1,f=0;f<i;++f)e=(o=t[f])[0],a<(r=o[1])!=a<c&&u<(l-e)*(a-r)/(c-r)+e&&(s=!s),l=e,c=r;return s},X.scaleBand=function t(){var o,u,n=Do().unknown(void 0),a=n.domain,l=n.range,c=[0,1],s=!1,f=0,h=0,p=.5;function e(){var t=a().length,n=c[1]<c[0],e=c[+n],r=c[1-n];o=(r-e)/Math.max(1,t-f+2*h),s&&(o=Math.floor(o)),e+=(r-e-o*(t-f))*p,u=o*(1-f),s&&(e=Math.round(e),u=Math.round(u));var i=_(t).map(function(t){return e+o*t});return l(n?i.reverse():i)}return delete n.unknown,n.domain=function(t){return arguments.length?(a(t),e()):a()},n.range=function(t){return arguments.length?(c=[+t[0],+t[1]],e()):c.slice()},n.rangeRound=function(t){return c=[+t[0],+t[1]],s=!0,e()},n.bandwidth=function(){return u},n.step=function(){return o},n.round=function(t){return arguments.length?(s=!!t,e()):s},n.padding=function(t){return arguments.length?(f=Math.min(1,h=+t),e()):f},n.paddingInner=function(t){return arguments.length?(f=Math.min(1,t),e()):f},n.paddingOuter=function(t){return arguments.length?(h=+t,e()):h},n.align=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),e()):p},n.copy=function(){return t(a(),c).round(s).paddingInner(f).paddingOuter(h).align(p)},Eo.apply(e(),arguments)},X.scaleLinear=function t(){var a,l,n=qo(Po,Po);return n.copy=function(){return jo(n,t())},Eo.apply(n,arguments),l=(a=n).domain,a.ticks=function(t){var n=l();return e(n[0],n[n.length-1],null==t?10:t)},a.tickFormat=function(t,n){var e=l();return Oo(e[0],e[e.length-1],null==t?10:t,n)},a.nice=function(t){null==t&&(t=10);var n,e=l(),r=0,i=e.length-1,o=e[r],u=e[i];return u<o&&(n=o,o=u,u=n,n=r,r=i,i=n),0<(n=s(o,u,t))?n=s(o=Math.floor(o/n)*n,u=Math.ceil(u/n)*n,t):n<0&&(n=s(o=Math.ceil(o*n)/n,u=Math.floor(u*n)/n,t)),0<n?(e[r]=Math.floor(o/n)*n,e[i]=Math.ceil(u/n)*n,l(e)):n<0&&(e[r]=Math.ceil(o*n)/n,e[i]=Math.floor(u*n)/n,l(e)),a},a},X.scaleOrdinal=Do,X.scaleUtc=function(){return Eo.apply(Pa(au,uu,ru,nu,tu,Ko,Bo,Ro,pu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},X.select=vt,X.selectAll=function(t){return"string"==typeof t?new ht([document.querySelectorAll(t)],[document.documentElement]):new ht([null==t?[]:t],ft)},X.ticks=e,X.timer=Hn,X.transition=ve,Object.defineProperty(X,"__esModule",{value:!0})});